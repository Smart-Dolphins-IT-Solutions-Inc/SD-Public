on:
  push:
    branches: ["main"]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

steps:
  - uses: actions/checkout@v4

  - uses: fixpoint/azblob-generate-static-index@v1
    with:
      connection-string: ${{ secrets.DefaultEndpointsProtocol=https;AccountName=usmtstorageaccount;AccountKey=Vfcphgbx5kpfIC2oI/b5+MSj8YlgbfGtFZE47ucP9lcziWZ03YKFaiyEhiYOvgqbUvI3WmEoCjOiY5GIwfTIWg==;BlobEndpoint=https://usmtstorageaccount.blob.core.windows.net/;QueueEndpoint=https://usmtstorageaccount.queue.core.windows.net/;TableEndpoint=https://usmtstorageaccount.table.core.windows.net/;FileEndpoint=https://usmtstorageaccount.file.core.windows.net/; }}
      prefix: downloadcenter/_SD
      overwrite: true
